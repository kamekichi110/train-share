<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>乗り換え案内</title>
    <link rel="shortcut icon" href="../asset/icon/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../css/index.css">
    <script src="../js/main.js"></script>
    <script>
function search_list() {
    var fromTXT = document.getElementById("from");
    var fromAREA = document.getElementById("location0");
    var forTXT = document.getElementById("for");
    var forAREA = document.getElementById("location1");
    var viaSec = document.getElementById("via-sec");
    var viaTXT = document.getElementById("via");
    var via = "";
    if (viaSec.value = "true") {
        via = viaSec.value + encodeURI(viaTXT.value);
    } else {
        via = "";
    }
    //utf-8 encode
    var fromData = fromTXT.value + fromAREA.value;
    var forData = forTXT.value + forAREA.value;
    var from = encodeURI(fromData);
    var for0 = encodeURI(forData);

    var URL0 = "https://api.ekispert.jp/v1/xml/search/course/light?from=";
    var URL1 = "&to=";
    var URL2 = "&searchType=";
    var type = "departure";
    var URL3 = "&shinkansen=";
    var shinkansen = document.getElementById("shinkansen").value;
    var URL4 = "&limitedExpress=";
    var exp = document.getElementById("exp").value;
    var URL5 = "&redirect=true&contentsMode=sp";
    var URL6 = "&key=";
    var key = "LE_DDLV9n4GxgPku";
    var urlLink = URL0 + from + URL1 + for0 + via + URL2 + type + URL3 + shinkansen + URL4 + exp + URL5 +URL6 + key;
    var textURL = document.getElementById("url");
    textURL.innerHTML = urlLink;
    alert('検索完了。表示します。');
}
    </script>
</head>
<body>
    <header>
        <img src="https://kamekichi110.github.io/train-share/asset/icon/main.png" class="icon" alt="icon">
        <h2>
          Train-Share
          <br>
          鉄道情報掲載サイト
        </h2>
      </header>
      <article>
        <br>
        <section>
          <h3>乗り換え案内</h3>
          <p>使用API:駅すぱあとWebサービス</p>
          <br>
          <p>同じ名前の駅名がある場合は<br>地域を選択してください。</p>
        </section>
        <br>
        <main>
            <p><input type="text" id="from" placeholder="出発駅">駅
                <br>
                地域:
                <select name="fromArea_" id="location0">
                    <option value="">選択なし</option>
                </select>
            </p>
            <p><input type="text" id="for" placeholder="到着駅">駅
            <br>
            地域:
            <select name="forArea_" id="location1">
                <option value="">選択なし</option>
            </select>
            </p>
            <p><select name="via-list_" id="via-sec">
                <option value="">経由地なし</option>
                <option value="&via=">経由地あり</option>
            </select>
                <input type="text" id="via">
            </p>
            <hr>
            <p>検索設定</p>
            <p>新幹線:
                <select name="type_" id="type">
                    <option value="false">利用しない</option>
                    <option value="true">利用する</option>
                </select>
            </p>
            <p>特急:
                <select name="exp_" id="exp">
                    <option value="false">利用しない</option>
                    <option value="true">利用する</option>
                </select>
            </p>
            <br>
            <button type="button" onclick="search_list()">検索</button>
            <br>
            <p id="url">wait...</p>
            <br>
            <hr>
            <br>
        </main>
        <br>
        <div class="footer">
          <p id="day"></p>
          <p>
            <br>管理者X(旧Twitter)<a href="https://twitter.com/sirokuma_8110F">link</a>
            <br>各種ツール
            <br><a href="https://kamekichi110.github.io/train-share/view/train-info.html">列車情報ビューアー</a>
            <a href="https://kamekichi110.github.io/train-share/photo/index.html">思い出写真</a>
          <a href="https://kamekichi110.github.io/train-share/index.html">home</a>
          </p>
        </div>
      </article>
</body>
</html>