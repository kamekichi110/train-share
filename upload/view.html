<!DOCTYPE html>
<html lang="ja">
<head>
    <title>共有</title>
    <style>
        .photo {
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="photoGallery"></div>

    <script>
        // 現在のURLを取得
        var currentUrl = window.location.href;

        // URLからshareの値を抽出
        var shareParam = currentUrl.replace("https://train-share.f5.si/upload/view.html?share=", "");

        if (shareParam) {
            // URLを生成
            var baseUrl = "http://trainshare1.starfree.jp/upload/" + shareParam;

            // APIから写真を取得して表示
            fetch(baseUrl)
                .then(response => response.json())
                .then(data => {
                    data.forEach(photoUrl => {
                        var img = document.createElement("img");
                        img.src = photoUrl;
                        img.className = "photo";
                        document.getElementById("photoGallery").appendChild(img);
                        var hr = document.createElement("hr");
                        document.getElementById("photoGallery").appendChild(hr);
                    });
                })
                .catch(error => {
                    window.alert("写真を取得できませんでした: " + error);
                });
        } else {
            window.alert("shareの値がURLから取得できませんでした。");
        }
    </script>
</body>
</html>